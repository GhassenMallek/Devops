 pipeline {
            agent any
            stages {
                stage('Checkout GIT') {
                    steps {
                        echo 'Pulling..'
                        git branch: 'Ghassen',
                        url : 'https://github.com/MGhassen30798/Devops'
                    }
                }
                stage('MVN Clean') {
                    steps {
                        dir('Spring/tpAchatProject') {
                            sh """mvn clean install"""
                        }
                    }
                }
                stage('MVN Compile') {
                    steps {
                        dir('Spring/tpAchatProject') {
                            sh """mvn compile"""
                        }
                    }
                }
                stage('MVN Test') {
                    steps {
                        dir('Spring/tpAchatProject') {
                            sh """mvn test"""
                        }
                    }
                }
                stage('Sonar'){
                    steps{
                        dir('Spring/tpAchatProject') {
                            sh """mvn sonar:sonar -Dsonar.projectKey=ghassen -Dsonar.host.url=http://172.10.0.55:9000 -Dsonar.login=e4688b6bdba8398b84fa7e94f008b20c340e18d5"""
                        }
                    }
                }
                stage('Nexus'){
                    steps{
                        dir('Spring/tpAchatProject') {
                            sh """mvn clean package deploy:deploy-file -DgroupId=com.esprit.examen -DartifactId=tpAchatProject -Dversion=1.0 -DgeneratePom=true -Dpackaging=jar -DrepositoryId=deploymentRepo -Durl=http://172.10.0.55:8081/repository/maven-releases/ -Dfile=target/tpAchatProject-1.0.jar"""
                                }
                            }
                        }
                }
            }
